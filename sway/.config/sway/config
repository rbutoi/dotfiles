# sway config

#
# basics
#
set $term kitty
set $web firefox
set $menu "rofi -modi combi -combi-modi drun#run -show combi"
set $editor EMACS_SOCKET_NAME=gui emacsclient -c -a ""
set $locker swaylock --daemonize --screenshots --indicator --indicator-radius 100 --indicator-thickness 7 --effect-blur 5x5 --grace 0.5 --fade-in 0.25

#
# input/output
#
input * {
# keyboard
    xkb_options ctrl:nocaps
    repeat_delay 250
    repeat_rate 30
# mouse
    accel_profile flat
    pointer_accel 0.35
}
output HDMI-A-1 {
    background "~/Pictures/mac/mojave/Mojave_Day.jpg" fill
    position 0 0
}
output DVI-D-1 {
    background "~/Pictures/mac/mojave/Mojave_Night.jpg" fill
    transform 90
}
workspace 1 output HDMI-A-1
workspace 3 output HDMI-A-1
workspace 2 output DVI-D-1
workspace 4 output DVI-D-1

#
# startup applications
#
bar swaybar_command waybar
exec systemd-cat -t dex dex -a -e SWAY                    # autostart
exec systemd-cat -t udiskie udiskie --tray --appindicator # automount manager
exec systemd-cat -t clipman wl-paste -t text --watch clipman --notify store --no-persist # clipboard
exec systemd-cat -t nm-applet nm-applet --indicator       # network status
exec systemd-cat -t make_pipe_run_wob.sh make_pipe_run_wob.sh # volume/brightness bar

# initial desktop
exec $term tmx2 new -ADs auto
exec $editor
exec spotify
for_window [class="Spotify"] move window to scratchpad

# per window config
for_window [title="gsimplecal"]                  move position mouse, move up 100 px, move left 120 px
for_window [class="Emacs"]                       opacity 0.9
for_window [app_id="emacs"]                      opacity 0.9
for_window [app_id="gnome-terminal-server" title="Terminal"] opacity 0.8
for_window [app_id="pavucontrol"]                floating enable
for_window [app_id="xfce4-appfinder"]            floating enable
for_window [app_id="exo-desktop-item-edit"]      floating enable
for_window [app_id="zenity"]                     floating enable
for_window [app_id="org.gnome.Weather"]          floating enable
for_window [app_id="gyrc"]                       floating enable
for_window [app_id="qalculate-gtk"]              floating enable
for_window [class="1Password"]                   floating enable
for_window [class="PCSX2"]                       floating enable
for_window [app_id="blueman-manager"]            floating enable
for_window [class="steam_proton"]                floating enable
for_window [class="steam_app_.*"]                floating enable
for_window [title="Sign in - Google Accounts"]   floating enable
for_window [title="Firefox - Sharing Indicator"] floating enable
for_window [title="^Close Firefox$"]             floating enable
for_window [app_id="goobuntu_indicator.py"]      floating enable
for_window [title="Find Directory"]              floating enable
for_window [title="^(Open|Save) Files?$"]        floating enable
for_window [app_id="wdisplays"]                  floating enable
assign [class="hl2_linux"]                       workspace 3
assign [class="Signal"]                          workspace 4

#
# display
#
font Noto Sans 12
default_border pixel 3
smart_borders on
hide_edge_borders --i3 both
client.focused #4c7899 #285577 #ffffff #2e9ef4 #20B9A5

#
# Keybindings - basics:
#
set $mod Mod4

set $left   h
set $down   j
set $up     k
set $right  l

bindsym $mod+Return          exec $term
bindsym $mod+Shift+Return    exec $term tmx2 new -ADs auto
bindsym $mod+w               exec swaymsg '[app_id="firefox-esr"] focus' || $web
bindsym $mod+Shift+w         exec $web
bindsym $mod+e               exec swaymsg '[app_id="emacs"] focus' || $editor
bindsym $mod+Shift+e         exec $editor
bindsym $mod+c               kill
bindsym $mod+space           exec $menu
bindsym $mod+q               exec wlogout -p layer-shell
bindsym $mod+Shift+q         reload
bindsym $mod+Shift+Backspace exec swaymsg exit
#
# Moving around:
#
bindsym $mod+$left        focus left
bindsym $mod+$down        focus down
bindsym $mod+$up          focus up
bindsym $mod+$right       focus right
# _move_ the focused window with the same, but add Shift
bindsym $mod+Shift+$left  move left
bindsym $mod+Shift+$down  move down
bindsym $mod+Shift+$up    move up
bindsym $mod+Shift+$right move right
#
# Workspaces:
#
workspace_auto_back_and_forth yes
mouse_warping output
# switch to workspace
bindsym $mod+1       workspace 1
bindsym $mod+2       workspace 2
bindsym $mod+3       workspace 3
bindsym $mod+4       workspace 4
bindsym $mod+5       workspace 5
bindsym $mod+6       workspace 6
bindsym $mod+Ctrl+1  workspace 1
bindsym $mod+Ctrl+2  workspace 2
bindsym $mod+Ctrl+3  workspace 3
bindsym $mod+Ctrl+4  workspace 4
bindsym $mod+Ctrl+5  workspace 5
bindsym $mod+Ctrl+6  workspace 6
# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
# other monitor
bindsym $mod+Shift+n move container to output left ; focus output left
bindsym $mod+Shift+m move container to output right; focus output right
# next and previous workspace
bindsym $mod+n       focus output left
bindsym $mod+m       focus output right
bindsym $mod+Ctrl+p  workspace prev_on_output --create
bindsym $mod+Ctrl+n  workspace next_on_output --create
bindsym --whole-window $mod+button4 workspace prev_on_output --create
bindsym --whole-window $mod+button5 workspace next_on_output --create
#
# Layout stuff:
#
floating_modifier $mod
bindsym $mod+Shift+b  splith
bindsym $mod+Shift+v  splitv
bindsym $mod+s        layout stacking
bindsym $mod+Shift+s  layout tabbed
bindsym $mod+d        layout toggle split
bindsym $mod+Shift+f  fullscreen
bindsym $mod+Shift+t  floating toggle
bindsym $mod+Ctrl+t   focus mode_toggle
bindsym $mod+a        focus parent
bindsym $mod+Shift+a  focus child
#
# Scratchpad:
#
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus       scratchpad show
#
# Resizing containers:
#
bindsym $mod+Ctrl+$left   resize shrink width 40px
bindsym $mod+Ctrl+$down   resize grow height 40px
bindsym $mod+Ctrl+$up     resize shrink height 40px
bindsym $mod+Ctrl+$right  resize grow width 40px

#
# App keys:
#
bindsym $mod+Shift+Ctrl+l     exec $locker
bindsym Print                 exec grim -g "$(slurp)" /tmp/screenshot.png && notify-send 'saved /tmp/screenshot.png'
bindsym $mod+Print            exec grim /tmp/screen.png && notify-send 'saved /tmp/screen.png'
bindsym XF86MonBrightnessUp   exec brightnessctl set 5%+ && echo $((100 * $(brightnessctl g) / $(brightnessctl m))) > $SWAYSOCK.wob
bindsym XF86MonBrightnessDown exec brightnessctl set 5%- && echo $((100 * $(brightnessctl g) / $(brightnessctl m))) > $SWAYSOCK.wob
bindsym XF86AudioMute         exec pamixer --toggle-mute
bindsym XF86AudioRaiseVolume  exec pamixer --unmute --increase 1 && notify-send -c volume "$(pamixer --get-volume | tee $SWAYSOCK.wob)"
bindsym XF86AudioLowerVolume  exec pamixer --unmute --decrease 1 && notify-send -c volume "$(pamixer --get-volume | tee $SWAYSOCK.wob)"
bindsym Pause                 exec pamixer --unmute --increase 1 && notify-send -c volume "$(pamixer --get-volume | tee $SWAYSOCK.wob)"
bindsym Scroll_Lock           exec pamixer --unmute --decrease 1 && notify-send -c volume "$(pamixer --get-volume | tee $SWAYSOCK.wob)"
bindsym $mod+Scroll_Lock      exec pamixer --toggle-mute
bindsym $mod+F1               exec playerctl play-pause
bindsym $mod+F2               exec yamaha_vol down
bindsym $mod+F3               exec yamaha_vol up
bindsym $mod+F4               exec yamaha_toggle_link.sh
bindsym $mod+Shift+F2         exec playerctl previous
bindsym $mod+Shift+F3         exec playerctl next
bindsym $mod+Shift+F4         exec notify-send -t 1500 yamaha_match_bedroom.py "$(yamaha_match_bedroom.py)"
bindsym XF86AudioPlay         exec playerctl play-pause
bindsym XF86AudioPrev         exec playerctl previous
bindsym XF86AudioNext         exec playerctl next
bindsym XF86AudioStop         exec playerctl stop
bindsym XF86Calculator        exec rofi -show calc
bindsym $mod+y                exec yt &> ~/.cache/.sway_yt || notify-send 'yt failed'
bindsym $mod+v                exec clipman pick --notify --tool rofi
bindsym $mod+Mod1+h           exec kitty --start-as fullscreen htop


# system configs
include /etc/sway/config.d/*

# host-specific config
include ~/.config/sway/specific
