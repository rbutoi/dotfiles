set $term kitty
set $web firefox
set $menu "rofi -modi combi -combi-modi drun#run -show combi"
set $editor emacsclient -c
set $locker swaylock --daemonize --screenshots --indicator --indicator-radius 100 --indicator-thickness 7 --effect-blur 5x5 --grace 0.5 --fade-in 0.25

output HDMI-A-1 {
    background "~/Pictures/mac/mojave/Mojave_Day.jpg" fill
    position 0 0
}
output DVI-D-1 {
    background "~/Pictures/mac/mojave/Mojave_Night.jpg" fill
}

input * {
# keyboard
    xkb_options ctrl:nocaps,altwin:ctrl_win
    repeat_delay 250
    repeat_rate 30
# mouse
    accel_profile flat
    pointer_accel 0.35
}

# blank screen after 30 minutes, lock after 2 hours
exec systemd-cat -t swayidle swayidle -w \
    timeout 1800 '[[ "$(playerctl metadata -f {{status}})" == Playing ]] || swaymsg "output * dpms off"' \
        resume 'swaymsg "output * dpms on"' \
    timeout 7200 "$locker" \
    before-sleep "$locker"

exec systemd-cat -t dex dex -a                            # startup applications
exec systemd-cat -t mako mako                             # notifications
exec systemd-cat -t udiskie udiskie --tray --appindicator # automount manager
exec systemd-cat -t polkit-gnome-agent /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec rm -f $SWAYSOCK.wob && mkfifo $SWAYSOCK.wob && tail -f $SWAYSOCK.wob 2>/dev/null | wob -O*
exec systemd-cat -t clipman wl-paste -t text --watch clipman --notify store --no-persist # clipboard
exec systemd-cat -t nm-applet nm-applet --indicator       # network status

exec $term ~/bin/continuetmux
exec $editor
exec $web
exec spotify

workspace 1 output HDMI-A-1
workspace 3 output HDMI-A-1
workspace 2 output DVI-D-1
workspace 4 output DVI-D-1

workspace_auto_back_and_forth yes
mouse_warping output

# display
font Ubuntu 12
default_border pixel 3
smart_borders on
hide_edge_borders --i3 both
# class                 border  backgr. text    indicator child_border
client.focused          #4c7899 #285577 #ffffff #2e9ef4   #20B9A5
#            only non-default, bright to indicate active -^

bar swaybar_command waybar

# per window config
for_window [title="gsimplecal"] move position mouse, move up 100 px, move left 120 px
for_window [app_id="pavucontrol"]           floating enable
for_window [app_id="xfce4-appfinder"]       floating enable
for_window [app_id="exo-desktop-item-edit"] floating enable
for_window [app_id="zenity"]                floating enable
for_window [app_id="org.gnome.Weather"]     floating enable
for_window [app_id="gyrc"]                  floating enable
for_window [app_id="qalculate-gtk"]         floating enable
for_window [class="1Password"]              floating enable
for_window [class="PCSX2"]                  floating enable
for_window [app_id="blueman-manager"]       floating enable
for_window [class="steam_proton"]           floating enable
for_window [class="steam_app_.*"]           floating enable
for_window [title="Firefox â€” Sharing Indicator"] floating enable
assign [class="hl2_linux"] workspace 3
assign [class="Ferdi"]     workspace 4
assign [class="Signal"]    workspace 4
assign [class="Spotify"]   workspace 4

#
# Keybindings - basics:
#
set $mod Mod1

set $left h
set $down j
set $up k
set $right l

bindsym $mod+Ctrl+Return exec $term
bindsym $mod+Shift+Return exec $term ~/bin/continuetmux
bindsym $mod+c kill
bindsym $mod+space exec $menu
floating_modifier $mod normal
bindsym $mod+Shift+q reload
bindsym $mod+Shift+Ctrl+q exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -b 'Yes, exit sway' 'swaymsg exit'
#
# Moving around:
#
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
# _move_ the focused window with the same, but add Shift
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
#
# Workspaces:
#
# switch to workspace (ctrl for emacs)
bindsym $mod+Ctrl+1 workspace 1
bindsym $mod+Ctrl+2 workspace 2
bindsym $mod+Ctrl+3 workspace 3
bindsym $mod+Ctrl+4 workspace 4
# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+m move container to output right; focus output right
# other monitor
bindsym $mod+m focus output right
# next and previous workspace
bindsym $mod+Shift+n workspace next_on_output --create
bindsym --whole-window $mod+button5 workspace next_on_output --create
bindsym $mod+Shift+p workspace prev_on_output --create
bindsym --whole-window $mod+button4 workspace prev_on_output --create
#
# Layout stuff:
#
bindsym $mod+Shift+b splith
bindsym $mod+Shift+v splitv
bindsym $mod+s layout stacking
bindsym $mod+Shift+s layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+Shift+f fullscreen
bindsym $mod+Shift+t floating toggle
bindsym $mod+t focus mode_toggle
bindsym $mod+a focus parent
bindsym $mod+Shift+a focus child
#
# Scratchpad:
#
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show
#
# Resizing containers:
#
bindsym $mod+Ctrl+$left resize shrink width 40px
bindsym $mod+Ctrl+$down resize grow height 40px
bindsym $mod+Ctrl+$up resize shrink height 40px
bindsym $mod+Ctrl+$right resize grow width 40px

#
# Radu-Arch keys:
#

bindsym $mod+Pause           exec wlogout
bindsym Shift+Ctrl+l         exec $locker
bindsym $mod+Shift+Ctrl+l    exec sleep 0.5s && killall -USR1 swayidle
bindsym $mod+Print           exec grim ~/screen.png
bindsym $mod+Shift+Print     exec grim -g "$(eval echo $(swaymsg -t get_tree | jq '.. | (.nodes? // empty)[] | select(.focused and .pid) | .rect | \"\(.x),\(.y) \(.width)x\(.height)\"'))" ~/window.png
bindsym $mod+Shift+e         exec $editor
bindsym XF86AudioMute        exec pamixer --toggle-mute
bindsym XF86AudioRaiseVolume exec pamixer --unmute --increase 5 && pamixer --get-volume > $SWAYSOCK.wob
bindsym XF86AudioLowerVolume exec pamixer --unmute --decrease 5 && pamixer --get-volume > $SWAYSOCK.wob
bindsym Pause                exec pamixer --unmute --increase 5 && pamixer --get-volume > $SWAYSOCK.wob
bindsym Scroll_Lock          exec pamixer --unmute --decrease 5 && pamixer --get-volume > $SWAYSOCK.wob
bindsym XF86AudioPlay        exec playerctl play-pause
bindsym XF86AudioPrev        exec playerctl previous
bindsym XF86AudioNext        exec playerctl next
bindsym XF86AudioStop        exec playerctl stop
bindsym XF86Calculator       exec "rofi -show calc"

# system configs
include /etc/sway/config.d/*
